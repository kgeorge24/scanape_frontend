{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\kgeor\\\\Desktop\\\\Projects\\\\scanape_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\kgeor\\\\Desktop\\\\Projects\\\\scanape_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\kgeor\\\\Desktop\\\\Projects\\\\scanape_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\kgeor\\\\Desktop\\\\Projects\\\\scanape_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\kgeor\\\\Desktop\\\\Projects\\\\scanape_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\kgeor\\\\Desktop\\\\Projects\\\\scanape_frontend\\\\src\\\\components\\\\GroceryCard.js\";\nimport React, { Component } from 'react';\n\nvar GroceryCard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GroceryCard, _Component);\n\n  function GroceryCard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, GroceryCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(GroceryCard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      quantity: \"\",\n      class: \"ingredient-card\",\n      clicked: false // Sets proper quantity of grocery item.\n\n    };\n\n    _this.decreaseHandler = function () {\n      var quantity = _this.state.quantity;\n      fetch(\"http://localhost:3000/ingredients/\".concat(_this.props.grocery.id), {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          quantity: quantity - 1\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        return _this.setState({\n          quantity: json.quantity\n        });\n      });\n    };\n\n    _this.increaseHandler = function () {\n      fetch(\"http://localhost:3000/ingredients/\".concat(_this.props.grocery.id), {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          quantity: _this.state.quantity + 1\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        return _this.setState({\n          quantity: json.quantity\n        });\n      });\n    };\n\n    _this.changeColor = function () {\n      var selected = _this.props.selected; // this.props.cart(this.props.grocery)\n\n      if (_this.state.class === \"ingredient-card\") {\n        _this.setState({\n          class: \"ingredient-card green\"\n        });\n\n        _this.props.cart(_this.props.grocery);\n      } else {\n        _this.setState({\n          class: \"ingredient-card\"\n        });\n\n        _this.props.selected.map(function (item, index) {\n          if (_this.props.grocery === item) {\n            console.log('we have a match');\n\n            _this.props.deselect(index);\n          }\n        });\n      }\n    };\n\n    _this.deleteCard = function () {\n      var token = localStorage.getItem('token');\n      fetch('http://localhost:3000/user_ingredients', {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: token\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        json.forEach(function (userIngredient) {\n          if (_this.props.user.id === parseInt(userIngredient.user_id) && _this.props.grocery.id === parseInt(userIngredient.ingredient_id)) {\n            fetch(\"http://localhost:3000/ingredients/\".concat(userIngredient.ingredient_id), {\n              method: 'DELETE',\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: token\n              }\n            }).then(function (res) {\n              return res.json();\n            }).then(function (json) {\n              var ingredients = _this.props.ingredients;\n              ingredients.map(function (ingredient, index) {\n                if (parseInt(ingredient.id) === parseInt(userIngredient.ingredient_id)) {\n                  console.log('done');\n\n                  _this.props.change(ingredient, index);\n\n                  fetch(\"http://localhost:3000/user_ingredients/\".concat(userIngredient.id), {\n                    method: 'DELETE',\n                    headers: {\n                      'Content-Type': 'application/json',\n                      Authorization: token\n                    }\n                  });\n                }\n              });\n            }); // .then( res => res.json())\n            // .then( json => {\n            //     const { userIng } = this.props\n            //     userIng.map( (ingredient, index) => { \n            //         console.log(parseInt(ingredient.ingredient_id), parseInt(userIngredient.ingredient_id))   \n            //         if(parseInt(ingredient.ingredient_id) === parseInt(userIngredient.ingredient_id)){\n            //             console.log('weve reached')\n            //             this.props.change(ingredient, index)\n            //         }else{\n            //             console.log('didnt reach yet')\n            //         }\n            //     })                                \n            // })\n          }\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(GroceryCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch(\"http://localhost:3000/ingredients/\".concat(this.props.grocery.id)).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        return _this2.setState({\n          quantity: json.quantity\n        });\n      });\n    } // Decreases quantity on button click\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$grocery = this.props.grocery,\n          title = _this$props$grocery.title,\n          picture = _this$props$grocery.picture,\n          id = _this$props$grocery.id;\n      var quantity = this.state.quantity;\n      return React.createElement(\"div\", {\n        className: this.state.class,\n        \"data-id\": id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"delete-button\",\n        onClick: this.deleteCard,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"X\"), React.createElement(\"img\", {\n        src: picture,\n        alt: \"\",\n        onClick: this.changeColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"ingredient-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, title), React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.decreaseHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"-\"), React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.increaseHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"+\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Quantity: \", quantity)));\n    }\n  }]);\n\n  return GroceryCard;\n}(Component);\n\nexport { GroceryCard as default };","map":{"version":3,"sources":["C:\\Users\\kgeor\\Desktop\\Projects\\scanape_frontend\\src\\components\\GroceryCard.js"],"names":["React","Component","GroceryCard","state","quantity","class","clicked","decreaseHandler","fetch","props","grocery","id","method","headers","body","JSON","stringify","then","res","json","setState","increaseHandler","changeColor","selected","cart","map","item","index","console","log","deselect","deleteCard","token","localStorage","getItem","Authorization","forEach","userIngredient","user","parseInt","user_id","ingredient_id","ingredients","ingredient","change","title","picture"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;IAEqBC,W;;;;;;;;;;;;;;;;;UACjBC,K,GAAQ;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,KAAK,EAAE,iBAFH;AAGJC,MAAAA,OAAO,EAAE,KAHL,CAQR;;AARQ,K;;UAkBRC,e,GAAkB,YAAM;AAAA,UACZH,QADY,GACC,MAAKD,KADN,CACZC,QADY;AAGpBI,MAAAA,KAAK,6CAAsC,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,EAAzD,GAA+D;AAChEC,QAAAA,MAAM,EAAE,OADwD;AAEhEC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAFuD;AAKhEC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEZ,UAAAA,QAAQ,EAAEA,QAAQ,GAAG;AAAvB,SAAf;AAL0D,OAA/D,CAAL,CAMGa,IANH,CAMS,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OANZ,EAOCF,IAPD,CAOO,UAAAE,IAAI;AAAA,eAAI,MAAKC,QAAL,CAAc;AAAEhB,UAAAA,QAAQ,EAAEe,IAAI,CAACf;AAAjB,SAAd,CAAJ;AAAA,OAPX;AAQH,K;;UAKDiB,e,GAAkB,YAAM;AACpBb,MAAAA,KAAK,6CAAsC,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,EAAzD,GAA+D;AAChEC,QAAAA,MAAM,EAAE,OADwD;AAEhEC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAFuD;AAKhEC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEZ,UAAAA,QAAQ,EAAE,MAAKD,KAAL,CAAWC,QAAX,GAAsB;AAAlC,SAAf;AAL0D,OAA/D,CAAL,CAMGa,IANH,CAMS,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OANZ,EAOCF,IAPD,CAOO,UAAAE,IAAI;AAAA,eAAI,MAAKC,QAAL,CAAc;AAAEhB,UAAAA,QAAQ,EAAEe,IAAI,CAACf;AAAjB,SAAd,CAAJ;AAAA,OAPX;AAQH,K;;UAKDkB,W,GAAc,YAAM;AAAA,UACRC,QADQ,GACK,MAAKd,KADV,CACRc,QADQ,EAGhB;;AAGA,UAAG,MAAKpB,KAAL,CAAWE,KAAX,KAAqB,iBAAxB,EAA0C;AACtC,cAAKe,QAAL,CAAc;AAAEf,UAAAA,KAAK,EAAE;AAAT,SAAd;;AACA,cAAKI,KAAL,CAAWe,IAAX,CAAgB,MAAKf,KAAL,CAAWC,OAA3B;AACH,OAHD,MAGK;AACD,cAAKU,QAAL,CAAc;AAAEf,UAAAA,KAAK,EAAE;AAAT,SAAd;;AACA,cAAKI,KAAL,CAAWc,QAAX,CAAoBE,GAApB,CAAyB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACtC,cAAI,MAAKlB,KAAL,CAAWC,OAAX,KAAuBgB,IAA3B,EAAgC;AAC5BE,YAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;;AACA,kBAAKpB,KAAL,CAAWqB,QAAX,CAAoBH,KAApB;AACH;AACJ,SALD;AAMH;AAEJ,K;;UAKDI,U,GAAa,YAAM;AACf,UAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AAEA1B,MAAAA,KAAK,CAAC,wCAAD,EAA0C;AAC3CK,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAELsB,UAAAA,aAAa,EAAEH;AAFV;AADkC,OAA1C,CAAL,CAKGf,IALH,CAKS,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OALZ,EAMCF,IAND,CAMO,UAAAE,IAAI,EAAI;AACXA,QAAAA,IAAI,CAACiB,OAAL,CAAc,UAAAC,cAAc,EAAI;AAE5B,cAAG,MAAK5B,KAAL,CAAW6B,IAAX,CAAgB3B,EAAhB,KAAuB4B,QAAQ,CAACF,cAAc,CAACG,OAAhB,CAA/B,IAA2D,MAAK/B,KAAL,CAAWC,OAAX,CAAmBC,EAAnB,KAA0B4B,QAAQ,CAACF,cAAc,CAACI,aAAhB,CAAhG,EAA+H;AAC3HjC,YAAAA,KAAK,6CAAsC6B,cAAc,CAACI,aAArD,GAAqE;AACtE7B,cAAAA,MAAM,EAAE,QAD8D;AAEtEC,cAAAA,OAAO,EAAE;AACL,gCAAgB,kBADX;AAELsB,gBAAAA,aAAa,EAAEH;AAFV;AAF6D,aAArE,CAAL,CAOCf,IAPD,CAOO,UAAAC,GAAG;AAAA,qBAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,aAPV,EAQCF,IARD,CAQO,UAAAE,IAAI,EAAI;AAAA,kBAEHuB,WAFG,GAEa,MAAKjC,KAFlB,CAEHiC,WAFG;AAIXA,cAAAA,WAAW,CAACjB,GAAZ,CAAiB,UAACkB,UAAD,EAAahB,KAAb,EAAuB;AACpC,oBAAGY,QAAQ,CAACI,UAAU,CAAChC,EAAZ,CAAR,KAA4B4B,QAAQ,CAACF,cAAc,CAACI,aAAhB,CAAvC,EAAsE;AAClEb,kBAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,wBAAKpB,KAAL,CAAWmC,MAAX,CAAkBD,UAAlB,EAA8BhB,KAA9B;;AAEAnB,kBAAAA,KAAK,kDAA2C6B,cAAc,CAAC1B,EAA1D,GAA+D;AAChEC,oBAAAA,MAAM,EAAE,QADwD;AAEhEC,oBAAAA,OAAO,EAAE;AACL,sCAAgB,kBADX;AAELsB,sBAAAA,aAAa,EAAEH;AAFV;AAFuD,mBAA/D,CAAL;AAOH;AACJ,eAbD;AAcH,aA1BD,EAD2H,CA6B3H;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ,SAlDD;AAmDH,OA1DD;AA2DH,K;;;;;;;wCA7HkB;AAAA;;AACfxB,MAAAA,KAAK,6CAAsC,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,EAAzD,EAAL,CACCM,IADD,CACO,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OADV,EAECF,IAFD,CAEO,UAAAE,IAAI;AAAA,eAAI,MAAI,CAACC,QAAL,CAAc;AAAEhB,UAAAA,QAAQ,EAAEe,IAAI,CAACf;AAAjB,SAAd,CAAJ;AAAA,OAFX;AAGH,K,CAID;;;;6BAuHQ;AAAA,gCAE0B,KAAKK,KAAL,CAAWC,OAFrC;AAAA,UAEImC,KAFJ,uBAEIA,KAFJ;AAAA,UAEWC,OAFX,uBAEWA,OAFX;AAAA,UAEoBnC,EAFpB,uBAEoBA,EAFpB;AAIJ,UAAMP,QAAQ,GAAG,KAAKD,KAAL,CAAWC,QAA5B;AAEA,aACI;AAAK,QAAA,SAAS,EAAE,KAAKD,KAAL,CAAWE,KAA3B;AAAkC,mBAASM,EAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,SAAS,EAAC,eAAlB;AAAkC,QAAA,OAAO,EAAE,KAAKoB,UAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,EAEI;AAAK,QAAA,GAAG,EAAEe,OAAV;AAAmB,QAAA,GAAG,EAAC,EAAvB;AAA0B,QAAA,OAAO,EAAE,KAAKxB,WAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,EAGQ;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKuB,KAAL,CADJ,EAEI;AAAQ,QAAA,SAAS,EAAC,QAAlB;AAA2B,QAAA,OAAO,EAAE,KAAKtC,eAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAFJ,EAEwE;AAAQ,QAAA,SAAS,EAAC,QAAlB;AAA2B,QAAA,OAAO,EAAE,KAAKc,eAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAFxE,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAcjB,QAAd,CAJJ,CAHR,CADJ;AAYH;;;;EA3JoCH,S;;SAApBC,W","sourcesContent":["import React, { Component } from 'react';\r\n\r\nexport default class GroceryCard extends Component {\r\n    state = {\r\n        quantity: \"\",\r\n        class: \"ingredient-card\",\r\n        clicked: false,\r\n    }\r\n\r\n\r\n    \r\n    // Sets proper quantity of grocery item.\r\n    componentDidMount(){\r\n        fetch(`http://localhost:3000/ingredients/${this.props.grocery.id}`)\r\n        .then( res => res.json())\r\n        .then( json => this.setState({ quantity: json.quantity}))\r\n    }\r\n    \r\n\r\n\r\n    // Decreases quantity on button click\r\n    decreaseHandler = () => {\r\n        const { quantity } = this.state\r\n\r\n        fetch(`http://localhost:3000/ingredients/${this.props.grocery.id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ quantity: quantity - 1})\r\n        }).then( res => res.json())\r\n        .then( json => this.setState({ quantity: json.quantity}))\r\n    }\r\n\r\n\r\n\r\n    // Increases quantity on button click\r\n    increaseHandler = () => {\r\n        fetch(`http://localhost:3000/ingredients/${this.props.grocery.id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ quantity: this.state.quantity + 1})\r\n        }).then( res => res.json())\r\n        .then( json => this.setState({ quantity: json.quantity}))\r\n    }\r\n\r\n\r\n\r\n    // Changes color of grocery item on click of image.\r\n    changeColor = () => {\r\n        const { selected } = this.props\r\n        \r\n        // this.props.cart(this.props.grocery)\r\n\r\n\r\n        if(this.state.class === \"ingredient-card\"){\r\n            this.setState({ class: \"ingredient-card green\"})\r\n            this.props.cart(this.props.grocery)\r\n        }else{\r\n            this.setState({ class: \"ingredient-card\"})\r\n            this.props.selected.map( (item, index) => {\r\n                if (this.props.grocery === item){\r\n                    console.log('we have a match')\r\n                    this.props.deselect(index)\r\n                }\r\n            }) \r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    // deletes user ingredient from database\r\n    deleteCard = () => {\r\n        let token = localStorage.getItem('token')\r\n\r\n        fetch('http://localhost:3000/user_ingredients',{\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: token\r\n            }\r\n        }).then( res => res.json())\r\n        .then( json => {\r\n            json.forEach( userIngredient => {\r\n\r\n                if(this.props.user.id === parseInt(userIngredient.user_id) && this.props.grocery.id === parseInt(userIngredient.ingredient_id)){\r\n                    fetch(`http://localhost:3000/ingredients/${userIngredient.ingredient_id}`,{\r\n                        method: 'DELETE',\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            Authorization: token\r\n                        }\r\n                    })\r\n                    .then( res => res.json())\r\n                    .then( json => {\r\n\r\n                        const { ingredients } = this.props\r\n\r\n                        ingredients.map( (ingredient, index) => {\r\n                            if(parseInt(ingredient.id) === parseInt(userIngredient.ingredient_id)){\r\n                                console.log('done')\r\n                                this.props.change(ingredient, index)\r\n\r\n                                fetch(`http://localhost:3000/user_ingredients/${userIngredient.id}`,{\r\n                                    method: 'DELETE',\r\n                                    headers: {\r\n                                        'Content-Type': 'application/json',\r\n                                        Authorization: token\r\n                                    }\r\n                                })\r\n                            }\r\n                        })\r\n                    })\r\n\r\n                    // .then( res => res.json())\r\n                    // .then( json => {\r\n                        \r\n                    //     const { userIng } = this.props\r\n                        \r\n                    //     userIng.map( (ingredient, index) => { \r\n\r\n                    //         console.log(parseInt(ingredient.ingredient_id), parseInt(userIngredient.ingredient_id))   \r\n                            \r\n                    //         if(parseInt(ingredient.ingredient_id) === parseInt(userIngredient.ingredient_id)){\r\n                    //             console.log('weve reached')\r\n\r\n                    //             this.props.change(ingredient, index)\r\n                    //         }else{\r\n                    //             console.log('didnt reach yet')\r\n                    //         }\r\n                    //     })                                \r\n                    // })\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    render(){\r\n\r\n        const { title, picture, id} = this.props.grocery\r\n        \r\n        const quantity = this.state.quantity\r\n        \r\n        return(\r\n            <div className={this.state.class} data-id={id}>\r\n                <button className=\"delete-button\" onClick={this.deleteCard}>X</button>\r\n                <img src={picture} alt=\"\" onClick={this.changeColor} ></img>\r\n                    <div className=\"ingredient-details\">\r\n                        <h3>{title}</h3>\r\n                        <button className=\"button\" onClick={this.decreaseHandler}>-</button><button className=\"button\" onClick={this.increaseHandler}>+</button>\r\n                        <br></br>\r\n                        <p>Quantity: {quantity}</p>\r\n                    </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}