{"ast":null,"code":"export var fetchUserData = function fetchUserData() {\n  return function (dispatch) {\n    var token = localStorage.getItem(\"token\");\n\n    if (token) {\n      fetch(\"http://localhost:3000/current_user\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accepts: \"application/json\",\n          Authorization: token\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        dispatch({\n          type: \"FETCH_USER_DATA\",\n          payload: json\n        });\n      });\n    }\n  };\n};\nexport var registerUserHandler = function registerUserHandler(event, formInfo, history) {\n  return function (dispatch) {\n    event.preventDefault();\n    fetch(\"http://localhost:3000/users\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accepts: \"application/json\"\n      },\n      body: JSON.stringify({\n        name: formInfo.name,\n        username: formInfo.username,\n        password: formInfo.password\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (json) {\n      if (json.jwt) {\n        localStorage.setItem(\"token\", json.jwt); // this.setState({ user: json })\n\n        dispatch({\n          type: \"FETCH_USER_DATA\",\n          payload: json\n        });\n      }\n    });\n    history.push(\"/home\");\n  };\n};","map":{"version":3,"sources":["/mnt/c/Users/kgeor/Desktop/Projects/scanape_frontend/src/actions/index.js"],"names":["fetchUserData","dispatch","token","localStorage","getItem","fetch","headers","Accepts","Authorization","then","res","json","type","payload","registerUserHandler","event","formInfo","history","preventDefault","method","body","JSON","stringify","name","username","password","jwt","setItem","push"],"mappings":"AAAA,OAAO,IAAMA,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAM,UAAAC,QAAQ,EAAI;AAC9C,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AAEA,QAAIF,KAAJ,EAAW;AACVG,MAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC3CC,QAAAA,OAAO,EAAE;AACR,0BAAgB,kBADR;AAERC,UAAAA,OAAO,EAAE,kBAFD;AAGRC,UAAAA,aAAa,EAAEN;AAHP;AADkC,OAAvC,CAAL,CAOEO,IAPF,CAOO,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAPV,EAQEF,IARF,CAQO,UAAAE,IAAI,EAAI;AACbV,QAAAA,QAAQ,CAAC;AAAEW,UAAAA,IAAI,EAAE,iBAAR;AAA2BC,UAAAA,OAAO,EAAEF;AAApC,SAAD,CAAR;AACA,OAVF;AAWA;AACD,GAhB4B;AAAA,CAAtB;AAkBP,OAAO,IAAMG,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,KAAD,EAAQC,QAAR,EAAkBC,OAAlB;AAAA,SAA8B,UAAAhB,QAAQ,EAAI;AAC5Ec,IAAAA,KAAK,CAACG,cAAN;AAEAb,IAAAA,KAAK,CAAC,6BAAD,EAAgC;AACpCc,MAAAA,MAAM,EAAE,MAD4B;AAEpCb,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAERC,QAAAA,OAAO,EAAE;AAFD,OAF2B;AAMpCa,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACpBC,QAAAA,IAAI,EAAEP,QAAQ,CAACO,IADK;AAEpBC,QAAAA,QAAQ,EAAER,QAAQ,CAACQ,QAFC;AAGpBC,QAAAA,QAAQ,EAAET,QAAQ,CAACS;AAHC,OAAf;AAN8B,KAAhC,CAAL,CAYEhB,IAZF,CAYO,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAZV,EAaEF,IAbF,CAaO,UAAAE,IAAI,EAAI;AACb,UAAIA,IAAI,CAACe,GAAT,EAAc;AACbvB,QAAAA,YAAY,CAACwB,OAAb,CAAqB,OAArB,EAA8BhB,IAAI,CAACe,GAAnC,EADa,CAEb;;AACAzB,QAAAA,QAAQ,CAAC;AAAEW,UAAAA,IAAI,EAAE,iBAAR;AAA2BC,UAAAA,OAAO,EAAEF;AAApC,SAAD,CAAR;AACA;AACD,KAnBF;AAoBAM,IAAAA,OAAO,CAACW,IAAR,CAAa,OAAb;AACA,GAxBkC;AAAA,CAA5B","sourcesContent":["export const fetchUserData = () => dispatch => {\r\n\tlet token = localStorage.getItem(\"token\")\r\n\r\n\tif (token) {\r\n\t\tfetch(\"http://localhost:3000/current_user\", {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccepts: \"application/json\",\r\n\t\t\t\tAuthorization: token\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(json => {\r\n\t\t\t\tdispatch({ type: \"FETCH_USER_DATA\", payload: json })\r\n\t\t\t})\r\n\t}\r\n}\r\n\r\nexport const registerUserHandler = (event, formInfo, history) => dispatch => {\r\n\tevent.preventDefault()\r\n\r\n\tfetch(\"http://localhost:3000/users\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\tAccepts: \"application/json\"\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tname: formInfo.name,\r\n\t\t\tusername: formInfo.username,\r\n\t\t\tpassword: formInfo.password\r\n\t\t})\r\n\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(json => {\r\n\t\t\tif (json.jwt) {\r\n\t\t\t\tlocalStorage.setItem(\"token\", json.jwt)\r\n\t\t\t\t// this.setState({ user: json })\r\n\t\t\t\tdispatch({ type: \"FETCH_USER_DATA\", payload: json })\r\n\t\t\t}\r\n\t\t})\r\n\thistory.push(\"/home\")\r\n}\r\n"]},"metadata":{},"sourceType":"module"}